var dataArr=[{home:"Trang Chủ",about:"Giới Thiệu",contact:"Liên Hệ",shop:"Cửa Hàng","shop/cake":"Bánh","shop/candy":"Kẹo","shop/fastfood":"Đồ Ăn Nhanh","shop/fruit":"Trái Cây","shop/icecream":"Kem",login:"Đăng Nhập",viewcart:"Xem Giỏ Hàng",checkout:"Thanh Toán",account:"Tài Khoản"},{home:"/",about:"/about",contact:"/contact",shop:"/shop/category","shop/cake":"/shop/category/cake","shop/candy":"/shop/category/candy","shop/fastfood":"/shop/category/fastfood","shop/fruit":"/shop/category/fruit","shop/icecream":"/shop/category/icecream",login:"/login",viewcart:"/viewcart",checkout:"/checkout",account:"/account"},{home:"/assets/js/custom/home.js","product/detail":"/assets/js/custom/product_detail.js",shop:"/assets/js/custom/shop.js",checkout:"/assets/js/custom/checkout.js"}],titleArr=dataArr[0],urlArr=dataArr[1],scriptArr=dataArr[2],historyURL=[];function hideContent(){var e=window.innerWidth-$(document).width();document.body.style.paddingRight=e.toString()+"px",document.getElementById("content").style.display="none",document.getElementsByTagName("footer")[0].style.display="none"}function showContent(){document.getElementById("content").style.display="block",document.getElementsByTagName("footer")[0].style.display="block",document.body.style.paddingRight="0px"}function loadSript(e){var t;null!=scriptArr[e]&&((t=document.createElement("script")).src=scriptArr[e],document.body.appendChild(t))}function loadContent(t,e=0){let o=!0;historyURL.push(window.location.href),fetch("/content/"+t).then(e=>e.text()).then(e=>{try{notify((e=JSON.parse(e)).msg.type,e.msg.icon,e.msg.position,e.msg.content),o=!1}catch(e){}o&&(hideContent(),document.getElementById("content").innerHTML=e,document.title=titleArr[t],null!=scriptArr[t]&&((e=document.createElement("script")).src=`/assets/js/custom/${t}.js`,document.body.appendChild(e)),e=window.location.href+"/"+urlArr[t],window.history.pushState({path:e},"",urlArr[t]),showContent(),AOS.init())})}function loadDetailProduct(t){hideContent(),fetch("/content/product_detail/"+t).then(e=>e.text()).then(e=>{document.getElementById("content").innerHTML=e,document.title=titleArr["product/detail"],null!=scriptArr["product/detail"]&&((e=document.createElement("script")).src=scriptArr["product/detail"],document.body.appendChild(e));e=window.location.href+"/product_detail/"+t;window.history.pushState({path:e},"","/product/detail/"+t),showContent(),AOS.init()})}function urlShop(e,t,o,n){let c;return c="all"==e&&"default"==t&&1==o&&""==n?"/shop/category":`/shop/category/${e}/${t}/${o}/`+n}function filterShop(e="all",t="default",o=1,n=""){let c=urlShop(e,t="check"==t?(element=document.querySelector(".nice-select")).options[element.selectedIndex].value:t,o,n);fetch(`/content/filter_shop/${e}/${t}/${o}/`+n).then(e=>e.text()).then(e=>{document.getElementById("content").innerHTML=e,document.title=titleArr.shop,null!=scriptArr.shop&&((e=document.createElement("script")).src=scriptArr.shop,document.body.appendChild(e));e=window.location.href+c;window.history.pushState({path:e},"",c),AOS.init()})}function notify(e,t,o,n){Lobibox.notify(e,{pauseDelayOnHover:!0,size:"mini",rounded:!0,icon:t,continueDelayOnInactiveTab:!1,position:o,msg:n})}function addProductCart(o,n){let e=!0;"qty"==n&&(n=parseInt(document.querySelector(".cart-plus-minus-box").value)),fetch("/cart/add/"+o+"/"+n).then(e=>e.text()).then(t=>{try{"update"==(t=JSON.parse(t)).status?(e=!1,document.querySelector("#quantity"+o+" > strong").textContent=t.total_qty,document.querySelector("#totalmoney").textContent=t.total_money):"soldout"==t.status&&(e=!1,alert("Số lượng sản phẩm trong kho không đủ!"))}catch(e){}if(e){let e=document.querySelector("#totalmoney").textContent.replace(/\D/g,"");e=parseInt(e),$(".cart-product-wrapper").prepend(t);t=document.querySelector("#product_id"+o+" span.new").textContent.replace(/\D/g,""),t=(e=(e+=n*parseInt(t)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."),document.querySelector("#totalmoney").textContent=e+"đ",document.querySelector("#count-cart").textContent);document.querySelector("#count-cart").textContent=parseInt(t)+1,$("#product_id"+o).hide().fadeIn()}})}function deleteProductCart(t){fetch("/cart/delete/"+t).then(e=>e.text()).then(e=>{try{"delete"==(e=JSON.parse(e)).status&&($("#product_id"+t).hide("normal",function(){$(this).remove()}),document.querySelector("#totalmoney").textContent=e.total_money,document.querySelector("#count-cart").textContent=e.total_qty,"/viewcart"==window.location.pathname)&&(document.querySelector("#total-money").textContent=e.total_money,document.querySelector("#total-bill").textContent=e.total_money,$("#view_cart_product"+t).hide("normal",function(){$(this).remove()}))}catch(e){}})}function clearProductCart(){fetch("/cart/clear").then(e=>e.text()).then(e=>{try{"clear"==(e=JSON.parse(e)).status&&($("#table-cart").hide("normal",function(){$(this).remove()}),$(".cart-product-wrapper").children().hide("normal",function(){$(this).remove()}),document.querySelector("#count-cart").textContent=0,document.querySelector("#totalmoney").textContent="0đ",document.querySelector("#total-money").textContent="0đ",document.querySelector("#total-bill").textContent="0đ")}catch(e){}})}function searchProduct(){var e=$("option:selected",".nice-select").val();filterShop($(".sidebar-list li a.active").attr("id"),e,1,$("#searchFilterProduct").val())}function choosePage(e){var t=$("option:selected",".nice-select").val();filterShop($(".sidebar-list li a.active").attr("id"),t,e,$(".search-box button").siblings("input").val())}function soldOutRibbon(){$(".ribbon").parents(".product-inner").css("opacity","0.5"),$(".ribbon").parents(".prsoduct-inner").find(".action-wrapper").remove(),$(".ribbon").parents(".product-inner").find("a.image").removeAttr("onclick")}function loginAccount(){var e=document.querySelector("#loginForm input[id=username]").value,t=document.querySelector("#loginForm input[id=password").value;""==e||void 0===e||""==t||void 0===t?notify("warning","fa-duotone fa-pen-field","center","Bạn chưa nhập tài khoản hoặc mật khẩu"):(document.querySelector("#loginForm button[type=button]").removeAttribute("onclick"),document.querySelector("#loginForm button[type=button]").setAttribute("type","submit").click())}window.addEventListener("popstate",function(){var e=historyURL[historyURL.length-1].pathname;let t=e.replace("/","");if(""==e||"/"==e)t="home";else if(e.includes("/shop/category")){var o=e.replace("/shop/category","");""==o?t="shop":filterShop((o=o.split("/"))[1],o[2],o[3],o[4])}else if(e.includes("/product/detail/"))return void loadDetailProduct(e.replace("/product/detail/",""));loadContent(t)}),function(c){"use strict";window.addEventListener("scroll",function(){150<window.pageYOffset?document.querySelector(".header-sticky").classList.add("sticky"):document.querySelector(".header-sticky").classList.remove("sticky")});document.querySelectorAll(".action-execute").forEach(e=>{e.addEventListener("click",()=>{document.querySelector(".header-search-form").classList.contains("visible-execute")?document.querySelector(".header-search-form").classList.remove("visible-execute"):document.querySelector(".header-search-form").classList.add("visible-execute")})});var e=document.querySelectorAll(".cart-visible");const t=document.querySelector(".header-cart-content");e.forEach(e=>{e.addEventListener("click",()=>{t.style.display="block",t.classList.contains("animate__fadeIn")?(t.classList.remove("animate__fadeIn"),t.classList.add("animate__fadeOut")):(t.classList.remove("animate__fadeOut"),t.classList.add("animate__fadeIn"))})}),c(document).on("click",".header-action-btn-menu",function(){c("body").addClass("fix"),c(".mobile-menu-wrapper").addClass("open")}),c(document).on("click",".offcanvas-btn-close,.offcanvas-overlay",function(){c("body").removeClass("fix"),c(".mobile-menu-wrapper").removeClass("open")}),c(document).on("click","#showlogin",function(){c("#checkout-login").slideToggle(500)}),c(document).on("click","#showcoupon",function(){c("#checkout_coupon").slideToggle(500)}),c(document).on("click","#cbox",function(){c("#cbox-info").slideToggle(500)}),c(document).on("click","#ship-box",function(){c("#ship-box-info").slideToggle(1e3)}),c(document).on("click","#incQtyProduct",function(){var e=c(this).parents("tr").attr("id").replace("view_cart_product","");addProduct(parseInt(e),1)});e=c(".mobile-menu, .category-menu");e.find(".dropdown").slideUp(),e.on("click","li a, li .menu-expand",function(e){var t=c(this);t.parent().attr("class").match(/\b(menu-item-has-children|has-children|has-sub-menu)\b/)&&("#"===t.attr("href")||t.hasClass("menu-expand"))&&(e.preventDefault(),t.siblings("ul:visible").length?(t.parent("li").removeClass("active"),t.siblings("ul").slideUp()):(t.parent("li").addClass("active"),t.closest("li").siblings("li").removeClass("active").find("li").removeClass("active"),t.closest("li").siblings("li").find("ul:visible").slideUp(),t.siblings("ul").slideDown()))}),c(document).on("click",".shop_toolbar_btn > button",function(e){e.preventDefault(),c(".shop_toolbar_btn > button").removeClass("active"),c(this).addClass("active");var e=c(".shop_wrapper"),t=c(this).data("role");e.removeClass("grid_3 grid_4 grid_5 grid_list").addClass(t),"grid_3"==t&&e.children().addClass("col-lg-4 col-md-4 col-sm-6").removeClass("col-lg-3 col-cust-5 col-12"),"grid_4"==t&&e.children().addClass("col-xl-3 col-lg-4 col-md-4 col-sm-6").removeClass("col-lg-4 col-cust-5 col-12"),"grid_list"==t&&e.children().addClass("col-12").removeClass("col-xl-3 col-lg-3 col-lg-4 col-md-6 col-md-4 col-sm-6 col-cust-5")}),c(".cart-plus-minus").append('<div class="dec qtybutton">-</div><div class="inc qtybutton">+</div>'),c(document).on("click",".qtybutton",function(){var e=c(this),t=e.parent().find("input").val();t=e.hasClass("inc")?parseFloat(t)+1:1<t?parseFloat(t)-1:1,e.parent().find("input").val(t)}),c("#scroll-top").removeClass("show");{let t=c("#scroll-top"),o=0,n=c(window);n.on("scroll",function(){var e=c(this).scrollTop();!(e>o)&&200<n.scrollTop()?t.addClass("show"):t.removeClass("show"),o=e}),t.on("click",function(e){window.scrollTo(0,0)})}c(window).on("load",function(){AOS.init({once:!0})})}(jQuery),$(function(){$(document).keydown(".shop_wrapp",function(e){var t=$('.page-item a[aria-label="Next"]'),o=$('.page-item a[aria-label="Prev"]');switch(e.which){case 37:0<o.length&&choosePage(parseInt($(o).attr("name").split("page=")[1])-1);break;case 39:0<t.length&&choosePage(parseInt($(t).attr("name").split("page=")[1])+1)}})}),$(document).on("keypress","#loginForm",function(e){13==e.which&&loginAccount()});var callRegister=function(){var e=document.querySelector("#registerForm input[id=fullname]").value,t=document.querySelector("#registerForm input[id=username]").value,o=document.querySelector("#registerForm input[id=email]").value,n=document.querySelector("#registerForm input[id=password]").value;""==e||void 0===e||""==t||void 0===t||""==o||void 0===o||""==n||void 0===n?notify("warning","fa-duotone fa-pen-field","center","Bạn chưa nhập đầy đủ thông tin"):document.querySelector("#registerForm button[type=button]").setAttribute("type","submit").click()},callChangeInfo=($(document).on("click","#registerForm button",function(){callRegister()}),$(document).on("keypress","#registerForm",function(e){13==e.which&&callRegister()}),function(){var e=document.querySelector("#changeInfoForm input[id=fullname]").value,t=document.querySelector("#changeInfoForm input[id=phone]").value,o=document.querySelector("#changeInfoForm input[id=email]").value;""==e||void 0===e||""==t||void 0===t||""==o||void 0===o?notify("warning","fa-duotone fa-pen-field","center","Bạn chưa nhập đầy đủ thông tin"):document.querySelector("#changeInfoForm button[type=button]").setAttribute("type","submit").click()}),callChangePass=($(document).on("click","#changeInfoForm button",function(){callChangeInfo()}),$(document).on("keypress","#changeInfoForm",function(e){13==e.which&&callChangeInfo()}),function(){var e=document.querySelector("#changePassForm input[id=current_pwd]").value,t=document.querySelector("#changePassForm input[id=new_pwd]").value,o=document.querySelector("#changePassForm input[id=confirm_pwd]").value;""==e||void 0===e||""==t||void 0===t||""==o||void 0===o?notify("warning","fa-duotone fa-pen-field","center","Bạn chưa nhập đầy đủ thông tin"):(t!=o&&notify("error","fa-duotone fa-badge-check","center","Mật Khẩu Xác Nhận Không Chính Xác"),document.querySelector("#changePassForm button[type=button]").setAttribute("type","submit").click())}),callCheckout=($(document).on("click","#changePassForm button[name=submit]",function(){callChangePass()}),$(document).on("keypress","#changePassForm",function(e){13==e.which&&callChangePass()}),function(){var e=document.querySelector("#checkoutForm input[id=fullname]").value,t=document.querySelector("#checkoutForm input[id=phone]").value,o=document.querySelector("#checkoutForm input[id=address]").value,n=document.querySelector("#checkoutForm input[id=email]").value,c=document.querySelector("select#province").nextSibling.querySelector(".current").textContent,r=document.querySelector("select#city").nextSibling.querySelector(".current").textContent,i=document.querySelector("select#ward").nextSibling.querySelector(".current").textContent;""==e||void 0===e||""==t||void 0===t||""==o||void 0===o||""==c||void 0===c||""==r||void 0===r||""==i||void 0===i||""==n||void 0===n?notify("warning","fa-duotone fa-pen-field","center","Bạn chưa nhập đầy đủ thông tin"):document.querySelector("#checkoutForm button[type=button]").setAttribute("type","submit").click()});$(document).on("click","#checkoutForm button[type=button]",function(){callCheckout()}),$(document).on("keypress","#checkoutForm",function(e){13==e.which&&callCheckout()});