var dataArr=[{home:"Trang Chủ",about:"Giới Thiệu",contact:"Liên Hệ",shop:"Cửa Hàng","shop/cake":"Bánh","shop/candy":"Kẹo","shop/fastfood":"Đồ Ăn Nhanh","shop/fruit":"Trái Cây","shop/icecream":"Kem",login:"Đăng Nhập"},{home:"/",about:"/about",contact:"/contact",shop:"/shop/category","shop/cake":"/shop/category/cake","shop/candy":"/shop/category/candy","shop/fastfood":"/shop/category/fastfood","shop/fruit":"/shop/category/fruit","shop/icecream":"/shop/category/icecream",login:"/login"},{home:"/assets/js/custom/home.js","product/detail":"/assets/js/custom/product_detail.js",shop:"/assets/js/custom/shop.js"}],titleArr=dataArr[0],urlArr=dataArr[1],scriptArr=dataArr[2];function hideContent(){var t=window.innerWidth-$(document).width();document.body.style.paddingRight=t.toString()+"px",document.getElementById("content").style.display="none",document.getElementsByTagName("footer")[0].style.display="none"}function showContent(){document.getElementById("content").style.display="block",document.getElementsByTagName("footer")[0].style.display="block",document.body.style.paddingRight="0px"}function loadContent(e,t=0){hideContent(),fetch("/content/"+e).then(t=>t.text()).then(t=>{document.getElementById("content").innerHTML=t,document.title=titleArr[e],null!=scriptArr[e]&&((t=document.createElement("script")).src=`/assets/js/custom/${e}.js`,document.body.appendChild(t)),window.history.pushState(null,null,urlArr[e]),showContent(),AOS.init()})}function loadDetailProduct(e){hideContent(),fetch("/content/product_detail/"+e).then(t=>t.text()).then(t=>{document.getElementById("content").innerHTML=t,document.title=titleArr["product/detail"],null!=scriptArr["product/detail"]&&((t=document.createElement("script")).src=scriptArr["product/detail"],document.body.appendChild(t)),window.history.pushState(null,null,"/product/detail/"+e),showContent(),AOS.init()})}function urlShop(t,e,o,n){let c;return c="all"==t&&"default"==e&&1==o&&""==n?"/shop/category":`/shop/category/${t}/${e}/${o}/`+n}function filterShop(t="all",e="default",o=1,n=""){let c=urlShop(t,e="check"==e?(element=document.querySelector(".nice-select")).options[element.selectedIndex].value:e,o,n);fetch(`/content/filter_shop/${t}/${e}/${o}/`+n).then(t=>t.text()).then(t=>{document.getElementById("content").innerHTML=t,document.title=titleArr.shop,null!=scriptArr.shop&&((t=document.createElement("script")).src=scriptArr.shop,document.body.appendChild(t)),window.history.pushState(null,null,c),AOS.init()})}window.addEventListener("popstate",function(){var t,e=new URL(window.location.href).pathname;let o=e.replace("/","");""==e||"/"==e?o="home":e.includes("/shop/category")?""==(t=e.replace("/shop/category",""))?o="shop":filterShop((t=t.split("/"))[1],t[2],t[3],t[4]):e.includes("/product/detail/")?loadDetailProduct(e.replace("/product/detail/","")):loadContent(o)});const searchToggle=document.querySelectorAll(".action-execute"),cartIcon=(searchToggle.forEach(t=>{t.addEventListener("click",()=>{document.querySelector(".header-search-form").classList.contains("visible-execute")?document.querySelector(".header-search-form").classList.remove("visible-execute"):document.querySelector(".header-search-form").classList.add("visible-execute")})}),document.querySelectorAll(".cart-visible")),headerCart=document.querySelector(".header-cart-content");function notify(t,e,o,n){Lobibox.notify(t,{pauseDelayOnHover:!0,size:"mini",rounded:!0,icon:e,continueDelayOnInactiveTab:!1,position:o,msg:n})}cartIcon.forEach(t=>{t.addEventListener("click",()=>{headerCart.style.display="block",headerCart.classList.contains("animate__fadeIn")?(headerCart.classList.remove("animate__fadeIn"),headerCart.classList.add("animate__fadeOut")):(headerCart.classList.remove("animate__fadeOut"),headerCart.classList.add("animate__fadeIn"))})}),function(c){"use strict";c(document).on("click",".header-action-btn-menu",function(){c("body").addClass("fix"),c(".mobile-menu-wrapper").addClass("open")}),c(document).on("click",".offcanvas-btn-close,.offcanvas-overlay",function(){c("body").removeClass("fix"),c(".mobile-menu-wrapper").removeClass("open")}),c(document).on("click","#showlogin",function(){c("#checkout-login").slideToggle(500)}),c(document).on("click","#showcoupon",function(){c("#checkout_coupon").slideToggle(500)}),c(document).on("click","#cbox",function(){c("#cbox-info").slideToggle(500)}),c(document).on("click","#ship-box",function(){c("#ship-box-info").slideToggle(1e3)}),c(document).on("click","#incQtyProduct",function(){var t=c(this).parents("tr").attr("id").replace("view_cart_product","");addProduct(parseInt(t),1)});var t=c(".mobile-menu, .category-menu");t.find(".dropdown").slideUp(),t.on("click","li a, li .menu-expand",function(t){var e=c(this);e.parent().attr("class").match(/\b(menu-item-has-children|has-children|has-sub-menu)\b/)&&("#"===e.attr("href")||e.hasClass("menu-expand"))&&(t.preventDefault(),e.siblings("ul:visible").length?(e.parent("li").removeClass("active"),e.siblings("ul").slideUp()):(e.parent("li").addClass("active"),e.closest("li").siblings("li").removeClass("active").find("li").removeClass("active"),e.closest("li").siblings("li").find("ul:visible").slideUp(),e.siblings("ul").slideDown()))}),c(document).on("click",".shop_toolbar_btn > button",function(t){t.preventDefault(),c(".shop_toolbar_btn > button").removeClass("active"),c(this).addClass("active");var t=c(".shop_wrapper"),e=c(this).data("role");t.removeClass("grid_3 grid_4 grid_5 grid_list").addClass(e),"grid_3"==e&&t.children().addClass("col-lg-4 col-md-4 col-sm-6").removeClass("col-lg-3 col-cust-5 col-12"),"grid_4"==e&&t.children().addClass("col-xl-3 col-lg-4 col-md-4 col-sm-6").removeClass("col-lg-4 col-cust-5 col-12"),"grid_list"==e&&t.children().addClass("col-12").removeClass("col-xl-3 col-lg-3 col-lg-4 col-md-6 col-md-4 col-sm-6 col-cust-5")}),c(".cart-plus-minus").append('<div class="dec qtybutton">-</div><div class="inc qtybutton">+</div>'),c(document).on("click",".qtybutton",function(){var t=c(this),e=t.parent().find("input").val();e=t.hasClass("inc")?parseFloat(e)+1:1<e?parseFloat(e)-1:1,t.parent().find("input").val(e)}),c("#scroll-top").removeClass("show");{let e=c("#scroll-top"),o=0,n=c(window);n.on("scroll",function(){var t=c(this).scrollTop();!(t>o)&&200<n.scrollTop()?e.addClass("show"):e.removeClass("show"),o=t}),e.on("click",function(t){window.scrollTo(0,0)})}c(window).on("load",function(){AOS.init({once:!0})})}(jQuery),$(function(){function t(t,e,o,n){Lobibox.notify(t,{pauseDelayOnHover:!0,size:"mini",rounded:!0,icon:e,continueDelayOnInactiveTab:!1,position:o,msg:n})}function o(){return 0==document.querySelectorAll("#logged").length}function e(){var t=$("option:selected",".nice-select").val();filterShop($(".sidebar-list li a.active").attr("id"),t,1,$("#searchFilterProduct").val())}function n(t){var e=$("option:selected",".nice-select").val();filterShop($(".sidebar-list li a.active").attr("id"),e,t,$(".search-box button").siblings("input").val())}function c(c,a){if(function(e){var o=$(".cart-product-wrapper .cart-product-inner");for(let t=0;t<o.length;t++)if(o[t].id=="product_id"+e)return 1}(c)){var r=parseInt($("#quantity"+c).text().replace(/\D/g,"")),i=parseFloat($("#product_id"+c+" .price .new").text().replace("$","")),r=r+a,l=parseFloat($("#totalmoney").text().replace("$","")),l=parseFloat(l+i*a).toFixed(2);$("#quantity"+c+" > strong").text(r),$("#totalmoney").text(l+"$")}else{i=$("#count-cart").text(),r=($("#count-cart").text(parseInt(i)+1),$("#img-product"+c).attr("src"));let t=$("#product"+c+" .product-title").text(),e=(""==t&&(t=$(".product-title").text()),$("#product"+c+" .price .new").text()),o=(""==e&&(e=$(".regular-price").text()),$("#product"+c+" .price .old").text());""==o&&(o=$(".old-price").text());l=parseFloat($("#totalmoney").text().replace("$","")),i=parseFloat(e.replace("$",""))*a+l;let n=`<div class="cart-product-inner p-b-20 m-b-20 border-bottom" id="product_id${c}">
                    <div class="single-cart-product">
                  <div class="cart-product-thumb">
                      <a href="./frontend/detail_product.php"><img src="${r}" alt="Cart Product" class="rounded"></a>
                  </div>
                  <div class="cart-product-content">
                      <h3 class="title"><a href="./frontend/detail_product.php">${t}</a></h3>
                      <div class="product-quty-price">
                          <span class="cart-quantity" id="quantity${c}">Số lượng: <strong> ${a} </strong></span>
                          <span class="price">
                            `;""!=o?n+=`
              <span class="new">${e}</span>
              <span class="old" style="text-decoration: line-through;color: #DC3545;opacity: 0.5;">${o}</span>
              </span>
            `:n+=`<span class='new'>${e}</span>
            </span>`,n+=`
                      </div>
                  </div>
              </div>
              <div class="cart-product-remove">
                  <a class="remove-cart" id="product${c}">
                    <i class="fa-duotone fa-trash-can"></i>
                  </a>
              </div>
          </div>`,$(".cart-product-wrapper").prepend(n),$("#product_id"+c).hide().fadeIn(),$("#totalmoney").text(parseFloat(i).toFixed(2)+"$")}$.ajax({type:"post",url:"/cart/add/"+c+"/"+a})}$(document).on("keypress","#searchFilterProduct",function(t){13==t.which&&e()}),$(document).on("click",".search-box button",function(){e()}),$(document).keydown(".shop_wrapper grid_4",function(t){var e=$('.page-item a[aria-label="Next"]'),o=$('.page-item a[aria-label="Prev"]');switch(t.which){case 37:0<o.length&&n(parseInt($(o).attr("name").split("page=")[1])-1);break;case 39:0<e.length&&n(parseInt($(e).attr("name").split("page=")[1])+1)}}),$(document).on("click",'.page-item a[aria-label="Next"]',function(){n(parseInt($(this).attr("name").split("page=")[1])+1)}),$(document).on("click",'.page-item a[aria-label="Prev"]',function(){n(parseInt($(this).attr("name").split("page=")[1])-1)}),$(document).on("click","#page-choose",function(){n(parseInt($(this).attr("name").split("page=")[1]))}),$(document).on("click",".add-to-cart",function(){if(o()){var e=parseInt($(this).attr("id").replace("product",""));let t=parseInt($(".cart-plus-minus-box").val());c(e,t=isNaN(t)?1:t)}else t("warning","fa-duotone fa-cart-circle-xmark","right","Vui lòng đăng nhập để mua hàng")}),$(document).on("click","a#plus_product",function(){o()?c(parseInt($(this).parent().attr("id").replace("wrapper","")),1):t("warning","fa-duotone fa-cart-circle-xmark","right","Vui lòng đăng nhập để mua hàng")}),$(document).on("click",".pro-remove a",function(){var t=parseInt($(this).parent().attr("id").replace("product","")),e=parseFloat($("#product_id"+t+" .price .new").text().replace("$","")),o=parseFloat($("#totalmoney").text().replace("$","")),n=parseInt($("#count-cart").text()),c=parseInt($("#quantity"+t).text().replace(/\D/g,"")),o=(console.log(e,o,n,c),$("#view_cart_product"+t).fadeOut("normal",function(){$(this).remove()}),(o-e*c).toFixed(2));console.log(o),$("#totalmoney").text(o+"$"),$("#count-cart").text(n-1),$("#product_id"+t).hide("normal",function(){$(this).remove()}),$.ajax({type:"post",url:"/cart/delete/"+t})}),$(document).on("click","#clear-cart",function(){$("#table-cart").hide("normal",function(){$(this).remove()}),$(".cart-product-wrapper").children().hide("normal",function(){$(this).remove()}),$("#count-cart").text("0"),$("#totalmoney").text("0.00$"),$("#total-money").text("0.00$"),$("#total-bill").text("0.00$"),$.ajax({type:"post",url:"/cart/clear"})}),$(document).on("click",".remove-cart",function(){let e=$(this).attr("id").replace("product","");$("#product_id"+e).fadeOut("normal",function(){var t=parseInt($("#count-cart").text()),t=($("#count-cart").text(t-1),parseFloat($("#product_id"+e+" .price .new").text().replace("$",""))),t=(parseFloat($("#totalmoney").text().replace("$",""))-t*parseInt($("#quantity"+e).text().replace(/\D/g,""))).toFixed(2);$("#totalmoney").text(t+"$"),$(this).remove()}),$.ajax({type:"post",url:"/cart/delete/"+e,data:{delete_id:e}})})});var callLogin=function(){var t=document.querySelector("#loginForm input[id=username]").value,e=document.querySelector("#loginForm input[id=password").value;""==t||void 0===t||""==e||void 0===e?notify("warning","fa-duotone fa-pen-field","center","Bạn chưa nhập tài khoản hoặc mật khẩu"):document.querySelector("#loginForm button[type=button]").setAttribute("type","submit").click()},callRegister=($(document).on("click","#loginForm button",function(){callLogin()}),$(document).on("keypress","#loginForm",function(t){13==t.which&&callLogin()}),function(){var t=document.querySelector("#registerForm input[id=fullname]").value,e=document.querySelector("#registerForm input[id=username]").value,o=document.querySelector("#registerForm input[id=email]").value,n=document.querySelector("#registerForm input[id=password]").value;""==t||void 0===t||""==e||void 0===e||""==o||void 0===o||""==n||void 0===n?notify("warning","fa-duotone fa-pen-field","center","Bạn chưa nhập đầy đủ thông tin"):document.querySelector("#registerForm button[type=button]").setAttribute("type","submit").click()}),callChangeInfo=($(document).on("click","#registerForm button",function(){callRegister()}),$(document).on("keypress","#registerForm",function(t){13==t.which&&callRegister()}),function(){var t=document.querySelector("#changeInfoForm input[id=fullname]").value,e=document.querySelector("#changeInfoForm input[id=phone]").value,o=document.querySelector("#changeInfoForm input[id=email]").value;""==t||void 0===t||""==e||void 0===e||""==o||void 0===o?notify("warning","fa-duotone fa-pen-field","center","Bạn chưa nhập đầy đủ thông tin"):document.querySelector("#changeInfoForm button[type=button]").setAttribute("type","submit").click()}),callChangePass=($(document).on("click","#changeInfoForm button",function(){callChangeInfo()}),$(document).on("keypress","#changeInfoForm",function(t){13==t.which&&callChangeInfo()}),function(){var t=document.querySelector("#changePassForm input[id=current_pwd]").value,e=document.querySelector("#changePassForm input[id=new_pwd]").value,o=document.querySelector("#changePassForm input[id=confirm_pwd]").value;""==t||void 0===t||""==e||void 0===e||""==o||void 0===o?notify("warning","fa-duotone fa-pen-field","center","Bạn chưa nhập đầy đủ thông tin"):(e!=o&&notify("error","fa-duotone fa-badge-check","center","Mật Khẩu Xác Nhận Không Chính Xác"),document.querySelector("#changePassForm button[type=button]").setAttribute("type","submit").click())}),callCheckout=($(document).on("click","#changePassForm button[name=submit]",function(){callChangePass()}),$(document).on("keypress","#changePassForm",function(t){13==t.which&&callChangePass()}),function(){var t=document.querySelector("#checkoutForm input[id=fullname]").value,e=document.querySelector("#checkoutForm input[id=phone]").value,o=document.querySelector("#checkoutForm input[id=address]").value,n=document.querySelector("#checkoutForm input[id=province]").value,c=document.querySelector("#checkoutForm input[id=city]").value,a=document.querySelector("#checkoutForm input[id=ward]").value,r=document.querySelector("#checkoutForm input[id=email]").value;""==t||void 0===t||""==e||void 0===e||""==o||void 0===o||""==n||void 0===n||""==c||void 0===c||""==a||void 0===a||""==r||void 0===r?notify("warning","fa-duotone fa-pen-field","center","Bạn chưa nhập đầy đủ thông tin"):document.querySelector("#checkoutForm button[type=button]").setAttribute("type","submit").click()});$(document).on("click","#checkoutForm button[type=button]",function(){callCheckout()}),$(document).on("keypress","#checkoutForm",function(t){13==t.which&&callCheckout()});